Donald L. Shell이 제안한 정렬 알고리즘. 어느정도 정렬된 배열에 대해 빠른 삽입 정렬의 특성을 이용한다. 삽입 정렬은 한번에 요소를 정렬하려고 하지만 셸 정렬은 요소들을 쪼개서 정렬한다.

term(간격): 간격을 기준으로 요소를 추출해서 새로운 배열(리스트)를 만든다.

  

셸 정렬을 하기 위해선 term이라는 변수가 필요하다. term의 초기값은 배열의 크기의 2를 나눈 값이다. 그렇게 되면 arr[i]와 arr[i + term]을 정렬하게 된다. 첫번째 정렬이 끝난 후, term을 다시한번 2로 나눠 정렬하고 이를 반복한다

  

![[Untitled 19.png|Untitled 19.png]]

  

배열의 크기가 10이니 term은 2로 나눈 값인 5가 된다. (term = 5)

그리고 각 간격이 5인 수들을 비교한다.

  

![[Untitled 1 8.png|Untitled 1 8.png]]

  

5를 2로 나눈 값은 2지만 예제에서는 3으로 표현했다. (term = 3)

  

위의 과정을 거쳐 어느정도 정렬된 배열이 됐고, 이를 삽입 정렬을 이용하여 다시 정렬한다.

  

- 셸 정렬 코드
    
    ```Java
    public class ShellSort extends Sort {
        public static void main(String[] args) {
            int[] arr = new int[20];
            Random random = new Random();
            for (int i = 0; i < 20; i++) {
                arr[i] = random.nextInt(100);
            }
    
            printArray(arr);
    
            sort(arr);
        }
    
        public static void sort(int[] arr) {
            int length = arr.length;
    
            for (int term = length / 2; term > 0; term /= 2) {
                System.out.printf("term: %d\n", term);
                for (int i = term; i < length; i++) {
                    int temp = arr[i];
                    int j;
    
                    for (j = i - term; j >= 0; j -= term) {
                        if (arr[j] > temp) {
                            arr[j + term] = arr[j];
                        } else {
                            break;
                        }
                    }
                    arr[j + term] = temp;
                }
                printArray(arr);
            }
        }
    }
    ```
    
    20 46 90 83 4 18 24 12 29 85 25 94 89 12 12 23 42 17 69 85  
    term: 10  
    20 46 89 12 4 18 24 12 29 85 25 94 90 83 12 23 42 17 69 85  
    term: 5  
    18 24 12 12 4 20 42 17 29 12 23 46 89 69 85 25 94 90 83 85  
    term: 2  
    4 12 12 12 18 17 23 20 29 24 42 25 83 46 85 69 89 85 94 90  
    term: 1  
    4 12 12 12 17 18 20 23 24 25 29 42 46 69 83 85 85 89 90 94  
    

  

셸 정렬은 각각의 간격을 기준으로 삽입 정렬을 한다. 셸 정렬의 시간복잡도는 최악의 경우엔 O(n^2)이지만 평균적으로는 O(n log2n)이다.(2로 계속 나눠 정렬해 log2n이 나온다.)