  

MMU는 각 프로세스에게 자신만의 메모리 주소 공간을 제공해 자신들만 컴퓨터를 사용한다고 생각할 수 있지만 아직 입출력 장치가 남았다.

타이머 장치를 사용해 실행 중인 프로그램을 다른 프로그램으로 전환할 시점을 찾아낸다.

하지만 MMU의 설정을 프로그램이 마음대로 바꾸거나 인터럽트 발생 주기를 유저가 조작하면 프로그램이 비정상적으로 작동할 것이다.

  

CPU는 레지스터 어딘가에 있는 시스템 모드인지 유저 모드인지 결정하는 비트를 통해 이러한 문제를 해결할 수 있다.

  

  

- 유저 모드와 커널 모드
    
    유저가 중요한 자원에 접근하지 못하게 차단
    
    시스템에 중요한 영향을 끼치는 연산은 커널 모드에서만 실행해 하드웨어 보안 유지
    
    유저 모드와 커널 모드를 반복적으로 전환
    
      
    
    1. 시스템 모드(커널 모드)
    
    - 모든 시스템 메모리 등 하드웨어에 직접적으로 접근 가능
    - 모든 CPU 명령 실행 가능
    - 운영체제 코드나 디바이스 드라이버 같은 커널모드 코드가 실행됨
    
      
    
    1. 유저 모드:
    
    - 접근할 수 있는 영역이 제한되며 프로그램 자원에 접근하지 못 한다.
    - 하드웨어 직접 접근 불가능
    - 코드 작성, 프로세스 실행 명령 가능
    - 유저 애플리케이션 코드가 실행
    
      
    

  

입출력을 처리하는 명령어와 일부 명령어는 커널 모드에서만 실행 할 수 있다.

트랩(trap)이나 시스템 콜(system call)이라 부르는 특별한 명령어를 통해 사용자 모드에서 실행 중인 프로그램이 커널 모드 프로그램(운영체제)에게 요청을 보낼 수 있다.

  

1. 이 방식은 유저 프로그램으로부터 운영체제와 다른 프로그램을 보호할 수 있다.
2. 유저 프로그램이 MMU 같은 요소에 접근하지 못해 전적으로 운영체제가 프로그램에 대한 자원 할당을 제어할 수 있다.